# Platform-Auth

## 简介

认证服务主要有三个功能：发送验证码、注册、登录。

#### 发送验证码

在注册中，「发送验证码」是比较常规的需求，平台需要通过验证码来验证用户填写的手机号是否属于当前用户。

在认证服务中的验证码发送主要调用第三方服务来实现。主要需要对手机号进行校验，以及对发送验证码进行限制，即一个用户只能在固定时间间隔才能再次发送验证码，以此来避免短信接口被刷。

![get_sms_code](https://tobing-markdown.oss-cn-shenzhen.aliyuncs.com/get_sms_code.jpg)

#### 注册

![image-20210514180338077](https://tobing-markdown.oss-cn-shenzhen.aliyuncs.com/image-20210514180338077.png)

用户在注册的时候，首先会先在前端页面进行基本的校验。当然只有前端校验是不够的，后端的校验必不可少，因为用户有可能会绕过浏览器来提交一些恶意的信息等等。注册访问重点是要校验用户提交的数据是否正确，这里的正确有两方面含义：一方面，用户提交的信息必须要符合后台规定的规则，比如长度，格式等等；再者，用户提交的信息不能与数据库已经注册的用户冲突，即用户名和手机号不能和已经存在的用户冲突。

后台采用JSR303来对数据格式进行校验，同时在校验通过之后还会到后台查询用户提交的数据是否唯一。

![auth_register](https://tobing-markdown.oss-cn-shenzhen.aliyuncs.com/auth_register.jpg)

#### 登录

登录主要通过用户名和密码查询出用户的登录信息，没什么好说的，依旧时判断用户提交数据的合法性，在通过调用会员服务查询用户信息。



